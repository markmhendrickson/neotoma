{
  "scenarios": [
    {
      "name": "transaction_with_account_and_contact",
      "description": "Transaction linked to account and merchant contact",
      "records": [
        {
          "type": "account",
          "properties": {
            "schema_version": "1.0",
            "external_id": "acc-checking-001",
            "institution": "Chase Bank",
            "balance": 10000.0,
            "currency": "USD",
            "status": "active"
          }
        },
        {
          "type": "contact",
          "properties": {
            "schema_version": "1.0",
            "name": "Coffee Shop",
            "contact_type": "business",
            "category": "merchant"
          }
        },
        {
          "type": "transaction",
          "properties": {
            "schema_version": "1.0",
            "amount": -50.0,
            "currency": "USD",
            "date": "2024-12-10T00:00:00Z",
            "merchant_name": "Coffee Shop",
            "account_id": "acc-checking-001",
            "status": "completed"
          }
        }
      ],
      "expected_entities": [
        { "type": "account", "canonical_name": "chase bank" },
        { "type": "company", "canonical_name": "coffee shop" }
      ],
      "expected_relationships": [
        { "from": "transaction", "to": "account", "type": "belongs_to" },
        { "from": "transaction", "to": "contact", "type": "involves" }
      ]
    },
    {
      "name": "holding_with_account_and_wallet",
      "description": "Holding linked to account and wallet",
      "records": [
        {
          "type": "wallet",
          "properties": {
            "schema_version": "1.0",
            "name": "Fidelity Brokerage",
            "status": "active"
          }
        },
        {
          "type": "account",
          "properties": {
            "schema_version": "1.0",
            "external_id": "acc-001",
            "institution": "Fidelity Brokerage",
            "wallet": "Fidelity",
            "wallet_name": "Fidelity Brokerage",
            "status": "active"
          }
        },
        {
          "type": "holding",
          "properties": {
            "schema_version": "1.0",
            "snapshot_date": "2024-12-15T00:00:00Z",
            "asset_symbol": "AAPL",
            "quantity": 100,
            "current_value_usd": 18500.0,
            "account_id": "acc-001",
            "provider": "Fidelity"
          }
        }
      ],
      "expected_entities": [
        { "type": "institution", "canonical_name": "fidelity brokerage" },
        { "type": "account", "canonical_name": "acc-001" },
        { "type": "asset", "canonical_name": "aapl" }
      ],
      "expected_relationships": [
        { "from": "holding", "to": "account", "type": "held_in" },
        { "from": "account", "to": "wallet", "type": "belongs_to" }
      ]
    },
    {
      "name": "income_with_tax_event",
      "description": "Income and related tax event",
      "records": [
        {
          "type": "income",
          "properties": {
            "schema_version": "1.0",
            "income_date": "2024-01-15T00:00:00Z",
            "source": "Acme Corp",
            "amount_usd": 5000.0,
            "tax_year": 2024
          }
        },
        {
          "type": "tax_event",
          "properties": {
            "schema_version": "1.0",
            "event_date": "2024-06-15T00:00:00Z",
            "asset_symbol": "AAPL",
            "gain_loss_usd": 2000.0,
            "tax_year": 2024
          }
        }
      ],
      "expected_entities": [
        { "type": "company", "canonical_name": "acme corp" },
        { "type": "asset", "canonical_name": "aapl" }
      ],
      "expected_relationships": [
        {
          "from": "income",
          "to": "tax_event",
          "type": "related_to",
          "via": "tax_year"
        }
      ]
    },
    {
      "name": "purchase_status_transition",
      "description": "Purchase record with status transitions",
      "records": [
        {
          "type": "purchase",
          "properties": {
            "schema_version": "1.0",
            "item_name": "Office Desk",
            "status": "pending",
            "created_date": "2024-12-01T00:00:00Z",
            "estimated_cost_usd": 500.0
          }
        },
        {
          "type": "purchase",
          "properties": {
            "schema_version": "1.0",
            "item_name": "Office Desk",
            "status": "in_progress",
            "created_date": "2024-12-01T00:00:00Z",
            "estimated_cost_usd": 500.0
          }
        },
        {
          "type": "purchase",
          "properties": {
            "schema_version": "1.0",
            "item_name": "Office Desk",
            "status": "completed",
            "created_date": "2024-12-01T00:00:00Z",
            "completed_date": "2024-12-10T00:00:00Z",
            "estimated_cost_usd": 500.0,
            "actual_cost_usd": 475.0
          }
        }
      ],
      "expected_entities": [
        { "type": "purchase", "canonical_name": "office desk" }
      ],
      "expected_events": [
        {
          "type": "PurchaseStatusChanged",
          "from": "pending",
          "to": "in_progress"
        },
        {
          "type": "PurchaseStatusChanged",
          "from": "in_progress",
          "to": "completed"
        }
      ]
    },
    {
      "name": "balance_snapshot_sequence",
      "description": "Multiple balance snapshots over time",
      "records": [
        {
          "type": "balance",
          "properties": {
            "schema_version": "1.0",
            "snapshot_date": "2024-12-01T00:00:00Z",
            "account_id": "acc-checking-001",
            "balance_usd": 10000.0
          }
        },
        {
          "type": "balance",
          "properties": {
            "schema_version": "1.0",
            "snapshot_date": "2024-12-15T00:00:00Z",
            "account_id": "acc-checking-001",
            "balance_usd": 12500.0
          }
        },
        {
          "type": "balance",
          "properties": {
            "schema_version": "1.0",
            "snapshot_date": "2025-01-01T00:00:00Z",
            "account_id": "acc-checking-001",
            "balance_usd": 11000.0
          }
        }
      ],
      "expected_entities": [
        { "type": "account", "canonical_name": "acc-checking-001" }
      ],
      "expected_events": [
        { "type": "BalanceSnapshotRecorded", "date": "2024-12-01" },
        { "type": "BalanceSnapshotRecorded", "date": "2024-12-15" },
        { "type": "BalanceSnapshotRecorded", "date": "2025-01-01" }
      ]
    }
  ]
}



