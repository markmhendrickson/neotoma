# Design System and StyleGuide Synchronization Rule

## Purpose

Ensures `docs/ui/design_system.md` and `frontend/src/components/StyleGuide.tsx` remain synchronized, maintaining consistency between design system documentation and the interactive style guide component.

## Scope

This rule covers:
- Synchronization requirements between design system documentation and StyleGuide component
- When to update both files
- What must stay in sync
- Validation requirements

This rule does NOT cover:
- Content of specific design system sections (covered by `docs/ui/design_system.md`)
- StyleGuide component implementation details (covered by component code)

## Rule

**MANDATORY:** When updating either `docs/ui/design_system.md` or `frontend/src/components/StyleGuide.tsx`, agents MUST update the other file to maintain synchronization.

## Synchronization Requirements

### 1. Component Sections

**When adding, removing, or modifying component sections in StyleGuide:**
- Update corresponding section in `docs/ui/design_system.md`
- Ensure section titles, descriptions, and examples match
- Update component specifications in design system

**When adding, removing, or modifying component sections in design system:**
- Update corresponding section in StyleGuide component
- Ensure visual examples match documented specifications
- Add interactive examples to StyleGuide

### 2. Color Palette

**When updating colors:**
- Update color definitions in both files
- Update CSS variables in `frontend/src/index.css` if needed
- Ensure color swatches in StyleGuide match design system values
- Update dark mode colors in both files

### 3. Typography

**When updating typography:**
- Update type scale in design system
- Update typography examples in StyleGuide
- Ensure font sizes, weights, and line heights match
- Update CSS if needed

### 4. Spacing and Layout

**When updating spacing:**
- Update spacing scale in design system
- Update spacing examples in StyleGuide
- Ensure spacing values match between documentation and examples

### 5. Component Styles

**When updating component styles:**
- Update component specifications in design system
- Update component examples in StyleGuide
- Ensure visual appearance matches documented styles
- Update variants, states, and interactions in both files

### 6. Patterns and Guidelines

**When updating patterns:**
- Update pattern documentation in design system
- Update pattern examples in StyleGuide
- Ensure examples demonstrate documented patterns correctly

## Agent Actions

### When Modifying StyleGuide Component

1. **Identify changes:**
   - Which sections were added, removed, or modified?
   - Which design tokens were changed?
   - Which component examples were updated?

2. **Update design system:**
   - Add/update corresponding sections in `docs/ui/design_system.md`
   - Update specifications to match StyleGuide examples
   - Ensure descriptions align with visual examples

3. **Verify synchronization:**
   - Check that all StyleGuide sections have corresponding design system documentation
   - Verify that design tokens match between files
   - Ensure examples match specifications

### When Modifying Design System Documentation

1. **Identify changes:**
   - Which sections were added, removed, or modified?
   - Which design tokens were changed?
   - Which specifications were updated?

2. **Update StyleGuide:**
   - Add/update corresponding sections in StyleGuide component
   - Update examples to match new specifications
   - Ensure visual examples demonstrate documented patterns

3. **Verify synchronization:**
   - Check that all design system sections have corresponding StyleGuide examples
   - Verify that examples match documented specifications
   - Ensure design tokens are consistent

## Validation Checklist

Before completing changes to either file:

- [ ] Corresponding sections updated in both files
- [ ] Design tokens match between files (colors, typography, spacing)
- [ ] Component examples in StyleGuide match design system specifications
- [ ] Section titles and descriptions are consistent
- [ ] All new sections added to both files
- [ ] All removed sections removed from both files
- [ ] Visual examples demonstrate documented patterns correctly

## Constraints

- MUST update both files when modifying either one
- MUST maintain consistency between documentation and examples
- MUST NOT leave one file out of sync with the other
- MUST verify synchronization before completing changes

## Forbidden Patterns

- Updating StyleGuide without updating design system documentation
- Updating design system without updating StyleGuide examples
- Leaving sections in one file that don't exist in the other
- Having mismatched design tokens between files
- Documenting patterns that aren't demonstrated in StyleGuide
- Demonstrating patterns in StyleGuide that aren't documented

## Related Documents

- [`docs/ui/design_system.md`](./design_system.md) - Design system documentation
- [`frontend/src/components/StyleGuide.tsx`](../../frontend/src/components/StyleGuide.tsx) - Interactive style guide component
- [`docs/conventions/documentation_standards_rules.mdc`](../conventions/documentation_standards_rules.mdc) - Documentation standards

## Agent Instructions

### When to Load This Document

Load this document when:
- Modifying `docs/ui/design_system.md`
- Modifying `frontend/src/components/StyleGuide.tsx`
- Adding new design system sections or components
- Updating design tokens (colors, typography, spacing)
- Reviewing design system consistency

### Required Co-Loaded Documents

- `docs/ui/design_system.md` - Design system documentation
- `frontend/src/components/StyleGuide.tsx` - StyleGuide component
- `docs/conventions/documentation_standards_rules.mdc` - Documentation standards

### Constraints Agents Must Enforce

1. Always update both files when modifying either one
2. Maintain consistency between documentation and examples
3. Verify synchronization before completing changes
4. Ensure all sections exist in both files
5. Ensure design tokens match between files

### Forbidden Patterns

- Updating one file without updating the other
- Leaving files out of sync
- Mismatched design tokens or specifications
- Missing sections in either file

### Validation Checklist

- [ ] Both files updated when either is modified
- [ ] Design tokens match between files
- [ ] Examples match specifications
- [ ] All sections present in both files
- [ ] Synchronization verified before completion
