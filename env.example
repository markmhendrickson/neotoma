# Neotoma Environment Variables
# Copy this file to .env and fill in your actual values
# Never commit .env files to git

# =============================================================================
# Supabase Configuration (Required)
# =============================================================================
# Get these from: Supabase Dashboard → Settings → API
# Project ID: Settings → General → Project ID (or extract from Project URL)
# Service Role Key: Settings → API → service_role key (NOT anon key)

# Development Environment (preferred - use Project ID)
DEV_SUPABASE_PROJECT_ID=your-project-id
DEV_SUPABASE_SERVICE_KEY=your-service-role-key-here

# Alternative: Full URL (backward compatibility)
# DEV_SUPABASE_URL=https://your-project-id.supabase.co
# DEV_SUPABASE_SERVICE_KEY=your-service-role-key-here

# Supabase Access Token (for Management API - migrations, CLI operations)
# Get via: npx supabase login
# Or: Supabase Dashboard → Account → Access Tokens → Generate New Token
# SUPABASE_ACCESS_TOKEN=your-access-token-here

# DEPRECATED: Generic variables (not recommended - removed to prevent dev/prod mixups)
# The codebase no longer uses generic SUPABASE_* variables to ensure dev and prod
# environments are strictly separated. Use DEV_* or PROD_* variables instead.

# Production Environment (if needed)
# PROD_SUPABASE_PROJECT_ID=your-prod-project-id
# PROD_SUPABASE_SERVICE_KEY=your-prod-service-role-key-here
# Alternative: PROD_SUPABASE_URL=https://your-prod-project-id.supabase.co

# =============================================================================
# Server Configuration
# =============================================================================
# MCP Server port (stdio mode)
PORT=3000

# HTTP Actions Server port
HTTP_PORT=8080

# WebSocket MCP Bridge port
WS_PORT=8081

# Bearer token for HTTP Actions API authentication
ACTIONS_BEARER_TOKEN=dev-token-or-random-string

# =============================================================================
# Connector Configuration
# =============================================================================
# Secret key for connector authentication (must be at least 16 characters)
# This key encrypts OAuth tokens stored in the database and MUST remain static
# within each environment (changing it makes existing encrypted data inaccessible)

# Development Environment
DEV_CONNECTOR_SECRET_KEY=your-dev-connector-secret-key-min-16-chars

# Production Environment (if needed)
# PROD_CONNECTOR_SECRET_KEY=your-prod-connector-secret-key-min-16-chars

# DEPRECATED: Generic variables (not recommended - removed to prevent dev/prod mixups)
# The codebase now uses DEV_* and PROD_* variables to ensure dev and prod
# environments are strictly separated. Use DEV_* or PROD_* variables instead.
# CONNECTOR_SECRET_KEY=your-connector-secret-key-min-16-chars
# CONNECTOR_SECRETS_KEY=your-connector-secret-key-min-16-chars

# =============================================================================
# OpenAI Configuration (Optional)
# =============================================================================
# Required for embeddings and AI features

# Development Environment
DEV_OPENAI_API_KEY=sk-your-dev-api-key-here

# Production Environment (if needed)
# PROD_OPENAI_API_KEY=sk-your-prod-api-key-here

# DEPRECATED: Generic variable (not recommended - removed to prevent dev/prod mixups)
# The codebase no longer uses generic OPENAI_API_KEY to ensure dev and prod
# environments are strictly separated. Use DEV_* or PROD_* variables instead.
# OPENAI_API_KEY=sk-your-api-key-here

# =============================================================================
# Plaid Configuration (Optional)
# =============================================================================
# Get these from: Plaid Dashboard → Team Settings → Keys
# Required for bank account connection and transaction sync

# Development Environment
DEV_PLAID_CLIENT_ID=your_dev_plaid_client_id
DEV_PLAID_SECRET=your_dev_plaid_secret
PLAID_ENV=sandbox
# Alternative: PLAID_ENVIRONMENT=sandbox

# Production Environment (if needed)
# PROD_PLAID_CLIENT_ID=your_prod_plaid_client_id
# PROD_PLAID_SECRET=your_prod_plaid_secret
# PLAID_ENV=production  # Set to 'production' for live bank connections

# Plaid Products (comma-separated)
# Options: transactions, balance, identity
PLAID_PRODUCTS=transactions

# Country Codes (comma-separated)
# Options: US, CA, GB
PLAID_COUNTRY_CODES=US

# Optional: Plaid Webhook Configuration
# PLAID_WEBHOOK_URL=https://your-domain.com/import/plaid/webhook
# PLAID_WEBHOOK_SECRET=your_webhook_secret

# Optional: Plaid Link Defaults
# PLAID_LINK_USER_ID=default_user_id
# PLAID_LINK_CLIENT_NAME=Neotoma

# DEPRECATED: Generic variables (not recommended - removed to prevent dev/prod mixups)
# The codebase now uses DEV_* and PROD_* variables to ensure dev and prod
# environments are strictly separated. Use DEV_* or PROD_* variables instead.
# PLAID_CLIENT_ID=your_plaid_client_id
# PLAID_SECRET=your_plaid_secret
# PLAID_SANDBOX_SECRET=your_sandbox_secret

# =============================================================================
# Frontend Configuration (Optional)
# =============================================================================
# Vite environment variables (prefixed with VITE_)

# WebSocket port for frontend MCP connection
VITE_WS_PORT=8081

# Local MCP WebSocket URL (overrides default)
# VITE_LOCAL_MCP_URL=ws://127.0.0.1:8081/mcp

# MCP URL (alternative to local)
# VITE_MCP_URL=ws://your-mcp-server.com/mcp

# API Base URL (defaults to http://127.0.0.1:{HTTP_PORT})
# VITE_API_BASE_URL=http://localhost:8080

# Auto-seed records on startup (default: true, set to "false" to disable)
# VITE_AUTO_SEED_RECORDS=true

# =============================================================================
# Node Environment
# =============================================================================
# Set to "development", "test", or "production"
# NODE_ENV=development

# =============================================================================
# MCP WebSocket Bridge Configuration (Optional)
# =============================================================================
# Command to run MCP server (default: "node")
# MCP_CMD=node

# MCP server arguments (JSON array, default: ["dist/index.js"])
# MCP_ARGS=["dist/index.js"]

# =============================================================================
# Testing Configuration (Optional)
# =============================================================================
# Disable auto-start of actions server in tests
# NEOTOMA_ACTIONS_DISABLE_AUTOSTART=0

# Branch ports file for test isolation
# BRANCH_PORTS_FILE=.branch-ports

